<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/fontawesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/solid.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="css/all.css">
    <title>會員相關 AboutMember 含 統計圖</title>
    <style>
        :root {
            --fourth-color: #D7C4BB;
        }

        .mbManage .banner2 {
            background: url("../img/Header-3.jpg") center/cover;
            -webkit-clip-path: url(#banner2Clip);
            clip-path: url(#banner2Clip);
            height: 40vw;
            animation: fade-in 5s cubic-bezier(0.22, 0.61, 0.36, 1) 0.05s 1 normal forwards;
        }

        .animate__animated.animate__delay-6s {
            -webkit-animation-delay: 6s;
            animation-delay: 6s;
            -webkit-animation-delay: calc(var(--animate-delay)* 6);
            animation-delay: calc(var(--animate-delay)* 6);
        }

        .animate__animated.animate__delay-7s {
            -webkit-animation-delay: 7s;
            animation-delay: 7s;
            -webkit-animation-delay: calc(var(--animate-delay)* 7);
            animation-delay: calc(var(--animate-delay)* 7);
        }

        .animate__animated.animate__delay-8s {
            -webkit-animation-delay: 8s;
            animation-delay: 8s;
            animation-delay: calc(var(--animate-delay)* 8);
        }   
        
        .newsPage .newsList li:nth-of-type(odd) {
            background-color: blue;
        }

        .newsList li:nth-of-type(odd) {
            background-color: var(--fourth-color-half);
        }

        .newsList li {
            background: var(--fourth-color);
        }

        /*  將 主選單 固定 在 右側  */
        .menu-container { /* 整個選單容器 */
            position: fixed;                            /* 固定位置 */
            top: 30%;                                   /* 上方距離為 30% */
            right: 0;                                   /* 靠右 */
            width: 100px;                            
            background-color: rgba(255, 255, 255, 0.5);     /* 透明背景 */
            border-radius: 20px;
            margin-right: 20px;
            z-index: 1000;                              /* 堆疊順序，設定較高以確保選單位於最上層 */
            box-shadow:  0 0 15px 0 #00000047;
        }

        .menu-item { /* 選項樣式 */
            list-style-type: none;          /* 移除預設符號 */
            text-align: center;
        }
    
        .menu-item a { /* 選項連結樣式 */
            font-size: 18px;         
            margin: 10px;
            text-decoration: none;          /* 移除連結底線 */
            color: rgb(0, 13, 189);                 /* 文字顏色 */
        }

        .menu-item a:hover { /* 當滑鼠移至選項上時，文字會變成粗體紅色 */
            font-weight: bold;
            color: rgb(255, 0, 0);
        }        
    </style>
</head>

<body class="productPage mbManage">
    <!-- 頁首：Logo 與 選單 -->
    <section id="s-6-4-0" class="container-fluid">
        <nav class="my-navbar my-navbar__expand--md">
            <div class="container d-flex justify-content-between">
                <div class="d-flex column-gap-2">
                    <a href="/index.html" style="display: flex; align-items: center;"><img
                            style="width: 60px; border-radius: 50%" src="img/logo-w-401.jpg"></a>
                    <p class="text-left"
                        style="color: rgb(70, 70, 216); font-size: 20px; padding-top: 20px; padding-bottom: 0; z-index: 2;">
                        會員專區/ 網站功能/ 會員相關</p>
                </div>
                <div class="my-navbar__collapse">
                    <ul>
                        <li><a href="#s-6-4-1"               >6-4-1-等級權益</a></li>
                        <li><a href="#s-6-4-2"               >6-4-2-統計圖表</a></li>
                        <li><a href="6-4-3-MemberManage.html">6-4-3-管理維護</a></li>
                        <li><a href="6-0-webFunction.html"   >網站功能</a></li>
                        <li><a href="0-memberOnly.html"      >會員專區</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- 定義 裁剪路徑 banner2Clip，裁剪路徑的單位被設定為 objectBoundingBox。 -->
        <div class="banner2 d-flex flex-center">
            <svg width="0" height="0">
                <defs>
                    <clipPath id="banner2Clip" clipPathUnits="objectBoundingBox">
                        <path d="M0 0 V0.75 C0.2 1,0.8 1,1 0.75 V0 z" />
                    </clipPath>
                </defs>
            </svg>
        </div>
        <!-- 首頁 的 跑馬燈 -->
        <div class="row h1" style="margin-top: 0; padding-top: 0;">
            <marquee direction="left" scrollamount="20" behavior="left">
                <p class="h1 fw-900" style="color:rgb(160, 145, 145);">提升 青少年
                    <span style="color:rgb(95, 39, 39);"> 挫折耐受力 </span>
                    <span style="color:rgb(198, 138, 138);"> 談情說愛 </span>
                    <span style="color:rgb(206, 44, 44);"> 接種一劑 失戀疫苗 </span>
                    <span style="color:rgb(160, 145, 145);">&emsp;&emsp;&emsp;Sincs 2012</span>
                </p><br>
                <p class="h3 fw-900" style="color:rgb(160, 145, 145); margin-top: -50px;">Improve the 
                    <span style="color: rgb(95, 39, 39);"> Frustration tolerance </span> of Youth by 
                    <span style="color: rgb(198, 138, 138);"> Discussing the Theme of Love </span> & 
                    <span style="color: rgb(206, 44, 44);"> Vaccinate a Lovelorn Vaccine</span>
                </p>
            </marquee>
        </div>
    </section>

    <!-- 將 選單 固定在 右側  -->
    <section>
        <div class="menu-container">
            <ul class="menu m-0 pt-2 pb-2 ps-0">
                <li class="menu-item"><a class="nav-link active" aria-current="page" href="#s-6-4-1"               >6-4-1-等級權益</a></li>
                <li class="menu-item"><a class="nav-link active" aria-current="page" href="#s-6-4-2"               >6-4-2-統計圖表</a></li>
                <li class="menu-item"><a class="nav-link active" aria-current="page" href="6-4-3-MemberManage.html">6-4-3-管理維護</a></li>
                <li class="menu-item"><a class="nav-link active" aria-current="page" href="6-0-webFunction.html"   >網站功能</a></li>
                <li class="menu-item"><a class="nav-link active" aria-current="page" href="0-memberOnly.html"      >會員專區</a></li>
            </ul>
        </div>
    </section>
    <!-- section 6-4-1：會員區分  -->
    <section id="s-6-4-1" class="container" style="height: 100vh; padding-top: 50px;">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="row mb-2 h1 d-flex flex-column align-left color-text-main">會員等級&emsp;與&emsp;會員權益</div>
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-9">
                    <ul class="row newsList"></ul>
                </div>
            </div>
        </div>       
    </section>
    <!-- section 6-4-2：統計圖表  -->
    <section id="s-6-4-2" class="container-fluid" style="height:100vh; padding-top: 30px;">
        <!-- 標題 與 會員血型分布圖 -->
        <div class="container">
            <div class="row">
                <div class="col-md-2 pt-5">
                    <div class="row mb-5 h1 d-flex flex-column align-items-center color-text-main">會員相關<br>統計圖表</div>
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-6 pt-5">
                    <div class="card">
                        <div class="card-body">
                            <canvas id="myChartBloodType"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 會員 生肖 與 星座 分布圖 -->
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6 pt-2">
                    <div class="card">
                        <div class="card-body">
                            <canvas id="myChartChineseZodiac"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 pt-2">
                    <div class="card">
                        <div class="card-body">
                            <canvas id="myChartConstrllation"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- section 6-4-3：管理維護  -->
    <section id="s-6-4-3" class="container" style="height: 100vh; padding-top: 30px;">
        <div class="container">
            <div class="row">
                <div class="row h1 d-flex flex-column align-items-left color-text-main">會員資料&emsp;與&emsp;管理維護</div>
            </div>
        </div>
    </section>

    <br>
    <footer>
        <h5 class="fs-4 text-end m-0" style="margin-top: 20px; padding: 20px; color: beige;">design & setup by the Team of VLlV 2024.3.9</h5>
    </footer>

    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <!-- 以下屬於 6-4-2 : 統計圖表   -->
    <script>
        //居住人口 血型 分布圖
        const ctxBloodType = document.getElementById('myChartBloodType');
        const chartBloodType = new Chart(ctxBloodType, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: '人口 血型 分布圖',
                    data: [],
                    backgroundColor: [   // 每條長條的背景顏色
                        'rgba(255, 99, 132, 0.2)',   // 紅
                        'rgba(255, 159, 64, 0.2)',   // 橙
                        'rgba(255, 206, 86, 0.2)',   // 黃
                        'rgba(75, 192, 192, 0.2)',   // 綠
                        'rgba(54, 162, 235, 0.2)',   // 藍
                        'rgba(153, 102, 255, 0.2)',  // 紫
                        'rgba(201, 203, 207, 0.2)'   // 灰
                    ],
                    borderColor: [   // 每條長條的邊框顏色
                        'rgba(255, 99, 132, 1)',   // 紅
                        'rgba(255, 159, 64, 1)',   // 橙
                        'rgba(255, 206, 86, 1)',   // 黃
                        'rgba(75, 192, 192, 1)',   // 綠
                        'rgba(54, 162, 235, 1)',   // 藍
                        'rgba(153, 102, 255, 1)',  // 紫
                        'rgba(201, 203, 207, 1)'   // 灰
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        //人口 生肖 分布圖
        const ctxChineseZodiac = document.getElementById('myChartChineseZodiac');
        const chartChineseZodiac = new Chart(ctxChineseZodiac, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: '人口 生肖 分布圖',
                    data: [],
                    backgroundColor: [   // 每條長條的背景顏色
                        'rgba(255, 99, 132, 0.2)',   // 紅
                        'rgba(255, 159, 64, 0.2)',   // 橙
                        'rgba(255, 206, 86, 0.2)',   // 黃
                        'rgba(75, 192, 192, 0.2)',   // 綠
                        'rgba(54, 162, 235, 0.2)',   // 藍
                        'rgba(153, 102, 255, 0.2)',  // 紫
                        'rgba(201, 203, 207, 0.2)'   // 灰
                    ],
                    borderColor: [   // 每條長條的邊框顏色
                        'rgba(255, 99, 132, 1)',   // 紅
                        'rgba(255, 159, 64, 1)',   // 橙
                        'rgba(255, 206, 86, 1)',   // 黃
                        'rgba(75, 192, 192, 1)',   // 綠
                        'rgba(54, 162, 235, 1)',   // 藍
                        'rgba(153, 102, 255, 1)',  // 紫
                        'rgba(201, 203, 207, 1)'   // 灰
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        //居住人口 星座 分布圖
        const ctxConstrllation = document.getElementById('myChartConstrllation');
        const chartConstrllation = new Chart(ctxConstrllation, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: '人口 星座 分布圖',
                    data: [],
                    backgroundColor: [   // 每條長條的背景顏色
                        'rgba(255, 99, 132, 0.2)',   // 紅
                        'rgba(255, 159, 64, 0.2)',   // 橙
                        'rgba(255, 206, 86, 0.2)',   // 黃
                        'rgba(75, 192, 192, 0.2)',   // 綠
                        'rgba(54, 162, 235, 0.2)',   // 藍
                        'rgba(153, 102, 255, 0.2)',  // 紫
                        'rgba(201, 203, 207, 0.2)'   // 灰
                    ],
                    borderColor: [   // 每條長條的邊框顏色
                        'rgba(255, 99, 132, 1)',   // 紅
                        'rgba(255, 159, 64, 1)',   // 橙
                        'rgba(255, 206, 86, 1)',   // 黃
                        'rgba(75, 192, 192, 1)',   // 綠
                        'rgba(54, 162, 235, 1)',   // 藍
                        'rgba(153, 102, 255, 1)',  // 紫
                        'rgba(201, 203, 207, 1)'   // 灰
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        $(function () {
            //load data
            $.ajax({
                type: "GET",
                url: "chartForMember-api.php",
                dataType: "json",
                async: false,
                success: showdata,
                error: function () {
                    alert("error : chartForMember-api.php");
                }
            });
        });

        function showdata(data) {
            console.log(data);
            //人口 血型 分布
            data.dataBloodType.forEach(function (item) {
                chartBloodType.data.labels.push(item.BloodType);
                chartBloodType.data.datasets[0].data.push(item.countBloodType);
            });
            chartBloodType.data.labels.sort((a, b) => a.localeCompare(b));

            //人口 生肖 分布
            data.dataChineseZodiac.forEach(function (item) {
                chartChineseZodiac.data.labels.push(item.ChineseZodiac);
                chartChineseZodiac.data.datasets[0].data.push(item.countChineseZodiac);
            });
            chartChineseZodiac.data.labels.sort((a, b) => a.localeCompare(b));

            //人口 星座 分布
            data.dataConstrllation.forEach(function (item) {
                chartConstrllation.data.labels.push(item.Constrllation);
                chartConstrllation.data.datasets[0].data.push(item.countConstrllation);
            });
            chartConstrllation.data.labels.sort((a, b) => a.localeCompare(b));

            chartBloodType.update();
            chartChineseZodiac.update();
            chartConstrllation.update();
        }

        // 定時器，每 1 秒更新一次資料
//        setInterval(function () {
//            $.ajax({
//                type: "GET",
//                url: "chartForMember-api.php",
//                dataType: "json",
//                success: function (data) {
                    // 更新圖表資料
//                    updateCharts(data);
//                },
//                error: function () {
//                    console.log("更新失敗！");
//                }
//            });
//        }, 5000); 
        // 每 5 秒執行一次

    </script>
    <!-- 以下 屬於 6-4-3 : 維護管理   -->

    <!--   以下 屬於 正庸的麵包店  -->
    <!--  <script src="./js/mypagination.js"></script> -->
    <!--  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->
    <!--  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>    -->
    <!--  <script src="./js/all.js"></script>  -->

    <script>
        function updateNewsList() {
            newsList.innerHTML = showData.map((data, index) =>
            `
            <li class="p-3 d-flex align-items-center gap-2 animate__animated animate__flipInX animate__delay-${index}s animate__fast" style=''>
            <h2 class="flex-shrink-0 m-0 px-3 py-2 fs-5 rounded-pill color-bg-main text-light">${data.title}</h2>
            <a href="#" class="link-dark"><h3 class="m-0 fs-5">${data.content}</h3></a>          
            </li>
            `
            ).join("");
        }

        const newsList = document.querySelector('.newsList');
        // const url = '/bakery/fakedata/news.json';//上線版
        const url = 'fakedata/memberLevel.json';//Live Server版

        fetch(url)
            .then(res => res.json())
            .then(newsData => {
                //過濾出要顯示的部分
                showData = newsData.filter(data => data.show);
                updateNewsList();
            })
            .catch(err => {
                console.log(err);
            });
    </script>
</body>

</html>